{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst params = {\n    key: '48985421-1c318736e0b6dddab9dd61498',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n};\nexport async function fetchImages(query, page, limit) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: { ...params, q: query, page, per_page: limit, },\n        });\n            return {\n            hits: response.data.hits,\n            totalHits: response.data.totalHits,\n        };      \n    }\n        catch (error) {\n            console.error('Error fetching images:', error);\n            return { hits: [], totalHits: 0 };\n        }\n    };","import iziToast from 'izitoast';  \nimport 'izitoast/dist/css/iziToast.min.css'; \nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n};\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n    images.forEach(image => {\n        const imageCard = document.createElement('div');\n        imageCard.classList.add('image-card');\n        \n        const img = document.createElement('img');\n        img.src = image.webformatURL;\n        img.alt = image.tags;\n        \n        const link = document.createElement('a');\n        link.href = image.largeImageURL;\n        link.appendChild(img); \n        \n        imageCard.appendChild(link);\n        \n        const cardInfo = document.createElement('div');\n        cardInfo.classList.add('card-info');\n        cardInfo.innerHTML = `\n            <p>Likes: ${image.likes}</p>\n            <p>Views: ${image.views}</p>\n            <p>Comments: ${image.comments}</p>\n            <p>Downloads: ${image.downloads}</p>\n        `;\n        \n        imageCard.appendChild(cardInfo);\n        gallery.appendChild(imageCard);\n    });\n\n    \n    lightbox.refresh();\n}","import SimpleLightbox from 'simplelightbox'; \nimport 'simplelightbox/dist/simple-lightbox.min.css'; \nimport iziToast from 'izitoast';  \nimport 'izitoast/dist/css/iziToast.min.css';  \nimport  { fetchImages } from './js/pixabay-api';\nimport { renderImages, clearGallery } from './js/render-functions';\n\n\nconst form = document.querySelector('#search-form');\nconst searchInput = document.querySelector('#search-input');\nconst loader = document.querySelector('.loader');\nconst loadButton = document.querySelector('#load-more-button');\n\nlet page = 1;  \nconst limit = 40; \nlet totalPages = 0;\n\nform.addEventListener('submit', async e => {\n    e.preventDefault();\n    const query = searchInput.value.trim();\n    if (!query) return;\n\n    clearGallery();\n    page = 1;\n    loader.style.display = 'block';\n    loadButton.style.display = 'none'; \n\n     try {\n        const { hits, totalHits } = await fetchImages(query, page, limit);\n        totalPages = Math.ceil(totalHits / limit);\n  \n      if (hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message: 'Sorry, there are no images matching your search query. Please try again!'\n        }); } else {\n          renderImages(hits);\n          loadButton.style.display = 'block';\n      }\n    }\n    catch(error) {\n      console.error('Error fetching images:', error);\n      iziToast.error({\n        title: 'Error',\n        message: 'Failed. Please try again later.'\n      });\n    }\n    finally {\n        loader.style.display = 'none';\n        \n    };\n});\n\nloadButton.addEventListener('click', async e => {\n    try {\n      const query = searchInput.value.trim();\n            page++;\n       const { hits, totalHits } = await fetchImages(query, page, limit);\n      totalPages = Math.ceil(totalHits / limit);\n      renderImages(hits);\n         if (page >= totalPages || hits.length === 0) {\n            loadButton.style.display = 'none';\n            iziToast.info({\n                title: 'No more results',\n                message: 'You have reached the last page of results.',\n            });\n             return;\n      }\n\n        const firstImageCard = document.querySelector('.image-card');\n        let cardHeight = 0;\n           if (firstImageCard) {\n                 cardHeight = firstImageCard.getBoundingClientRect().height;\n                }\n        if (cardHeight > 0) {\n            window.scrollBy({\n                top: cardHeight * 2,  \n                behavior: 'smooth',    \n            });\n        }\n\n      loadButton.style.display = 'block';\n\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed. Please try again later.'\n        });\n    }\n});"],"names":["BASE_URL","params","fetchImages","query","page","limit","response","axios","error","clearGallery","gallery","lightbox","SimpleLightbox","renderImages","images","image","imageCard","img","link","cardInfo","form","searchInput","loader","loadButton","totalPages","e","hits","totalHits","iziToast","firstImageCard","cardHeight"],"mappings":"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"}